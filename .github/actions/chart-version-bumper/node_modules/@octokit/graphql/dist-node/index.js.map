{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/error.js","../dist-src/graphql.js","../dist-src/with-defaults.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"4.4.0\";\n","export class GraphqlError extends Error {\nconstructor(request, response) {\nconst message = response.data.errors[0].message;\nsuper(message);\nObject.assign(this, response.data);\nthis.name = \"GraphqlError\";\nthis.request = request;\n// Maintains proper stack trace (only available on V8)\n/* istanbul ignore next */\nif (Error.captureStackTrace) {\nError.captureStackTrace(this, this.constructor);\n}\n}\n}\n","import { GraphqlError } from \"./error\";\nconst NON_VARIABLE_OPTIONS = [\n\"method\",\n\"baseUrl\",\n\"url\",\n\"headers\",\n\"request\",\n\"query\",\n\"mediaType\",\n];\nexport function graphql(request, query, options) {\noptions =\ntypeof query === \"string\"\n? (options = Object.assign({ query }, options))\n: (options = query);\nconst requestOptions = Object.keys(options).reduce((result, key) => {\nif (NON_VARIABLE_OPTIONS.includes(key)) {\nresult[key] = options[key];\nreturn result;\n}\nif (!result.variables) {\nresult.variables = {};\n}\nresult.variables[key] = options[key];\nreturn result;\n}, {});\nreturn request(requestOptions).then((response) => {\nif (response.data.errors) {\nthrow new GraphqlError(requestOptions, {\ndata: response.data,\n});\n}\nreturn response.data.data;\n});\n}\n","import { request as Request } from \"@octokit/request\";\nimport { graphql } from \"./graphql\";\nexport function withDefaults(request, newDefaults) {\nconst newRequest = request.defaults(newDefaults);\nconst newApi = (query, options) => {\nreturn graphql(newRequest, query, options);\n};\nreturn Object.assign(newApi, {\ndefaults: withDefaults.bind(null, newRequest),\nendpoint: Request.endpoint,\n});\n}\n","import { request } from \"@octokit/request\";\nimport { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nimport { withDefaults } from \"./with-defaults\";\nexport const graphql = withDefaults(request, {\nheaders: {\n\"user-agent\": `octokit-graphql.js/${VERSION} ${getUserAgent()}`,\n},\nmethod: \"POST\",\nurl: \"/graphql\",\n});\nexport function withCustomRequest(customRequest) {\nreturn withDefaults(customRequest, {\nmethod: \"POST\",\nurl: \"/graphql\",\n});\n}\n"],"names":["VERSION","GraphqlError","Error","constructor","request","response","message","data","errors","Object","assign","name","captureStackTrace","NON_VARIABLE_OPTIONS","graphql","query","options","requestOptions","keys","reduce","result","key","includes","variables","then","withDefaults","newDefaults","newRequest","defaults","newApi","bind","endpoint","Request","headers","getUserAgent","method","url","withCustomRequest","customRequest"],"mappings":"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"}