apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nrKubernetesOtel.deployment.configMap.fullname" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "newrelic.common.labels" . | nindent 4 }}
data:
  deployment-config.yaml: |
    receivers:
      {{- include "deployment-receivers" . | nindent 6 }}

    processors:
      {{- include "deployment-processors" . | nindent 6 }}
      {{- include "shared-processors" . | nindent 6 }}

    exporters:
      {{- include "shared-exporters" . | nindent 6 }}

    connectors:
      {{- include "deployment-connector" . | nindent 6 }}

    service:
      {{- if include "newrelic.common.verboseLog" . }}
      telemetry:
        logs:
          level: "debug"
      {{- end }}
      pipelines:
        {{- include "deployment-pipelines" . | nindent 8 }}
