apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nrKubernetesOtel.daemonset.configMap.fullname" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "newrelic.common.labels" . | nindent 4 }}
data:
  daemonset-config.yaml: |
    receivers:
      {{- include "daemonset-receivers" . | nindent 6 }}

    processors:
      {{- include "daemonset-processors" . | nindent 6 }}
      {{- include "shared-processors" . | nindent 6 }}

    exporters:
      {{- include "shared-exporters" . | nindent 6 }}

    connectors:
      {{- include "daemonset-connector" . | nindent 6 }}

    service:
      {{- if include "newrelic.common.verboseLog" . }}
      telemetry:
        logs:
          level: "debug"
      {{- end }}
      pipelines:
        {{- include "daemonset-pipelines" . | nindent 8 }}
