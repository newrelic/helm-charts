---
# Source: nr-k8s-otel-collector/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: example-nr-k8s-otel-collector-deployment
  namespace: newrelic
  labels:
app.kubernetes.io/instance: example
app.kubernetes.io/managed-by: Helm
app.kubernetes.io/name: nr-k8s-otel-collector
app.kubernetes.io/version: 1.0.3
helm.sh/chart: nr-k8s-otel-collector-0.8.23
spec:
  replicas: 1
  minReadySeconds: 5
  selector:
matchLabels:
  app.kubernetes.io/instance: example
  app.kubernetes.io/name: nr-k8s-otel-collector
  component: deployment
  template:
metadata:
  labels:
app.kubernetes.io/instance: example
app.kubernetes.io/name: nr-k8s-otel-collector
component: deployment
  annotations:
checksum/config: 6ead1f562807e8c3bb9e9ca5547f3e19ab5acc14c1b7a84c5405fa8e62358b77
spec:
  serviceAccountName: example-nr-k8s-otel-collector
  containers:
- name: otel-collector-deployment
  image: "newrelic/nrdot-collector-k8s:1.1.0"
  imagePullPolicy: IfNotPresent
  args: ["--config", "/config/deployment-config.yaml"]
  resources:
{}
  env:
- name: KUBE_NODE_NAME
  valueFrom:
fieldRef:
  apiVersion: v1
  fieldPath: spec.nodeName
- name: MY_POD_IP
  valueFrom:
fieldRef:
  apiVersion: v1
  fieldPath: status.podIP
- name: NR_LICENSE_KEY
  valueFrom:
secretKeyRef:
  name: example-nr-k8s-otel-collector-license
  key: licenseKey
  ports:
- name: http
  containerPort: 4318
  protocol: TCP
  volumeMounts:
- name: deployment-config
  mountPath: /config
  volumes:
- name: deployment-config
  configMap:
name: example-nr-k8s-otel-collector-deployment-config
