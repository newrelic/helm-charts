suite: subagent configurations
templates:
  - templates/configmap-subagent-configs.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: pass config to each subAgent
    set:
      agentsConfig:
        test-0:
          a: test
          value: 0
        test-1:
          a: test
          value: 1
        test-2:
          a: test
          aYAML:
            canI: HaveSomeYAML
    asserts:
      - hasDocuments:
          count: 3

      - documentIndex: 0
        equal:
          path: metadata.name
          value: local-data-test-0
      - documentIndex: 0
        equal:
          path: data["local_config"]
          value: |
            a: test
            value: 0

      - documentIndex: 1
        equal:
          path: metadata.name
          value: local-data-test-1
      - documentIndex: 1
        equal:
          path: data["local_config"]
          value: |
            a: test
            value: 1

      - documentIndex: 2
        equal:
          path: metadata.name
          value: local-data-test-2
      - documentIndex: 2
        equal:
          path: data["local_config"]
          value: |
            a: test
            aYAML:
              canI: HaveSomeYAML
