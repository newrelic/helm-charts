dependencies:
  # Old newrelic-infrastructure chart, now deprecated.
  - name: newrelic-infrastructure
    repository: file://../newrelic-infrastructure
    condition: infrastructure.enabled
    version: 2.7.3

  # New nri-kubernetes chart with compatibility layer.
  - name: nri-kubernetes
    alias: newrelic-infrastructure
    repository: file://../nri-kubernetes
    # Notes of why this is overengineered:
    #  * This chart is still using Helm 2 so we cannot set various conditions like `infrastructure.enabled,newrelic-infrastructure.compatibilityLayer`
    #  * Helm 2 also does not support `import-values` so we have to alias the new chart to the old one to get the values from it.
    condition: newrelic-infrastructure.compatibilityLayer
    version: 3.0.0

  # New nri-kubernetes chart.
  - name: nri-kubernetes
    repository: file://../nri-kubernetes
    condition: nri-kubernetes.enabled
    version: 3.0.0

  - name: nri-prometheus
    repository: file://../nri-prometheus
    condition: prometheus.enabled
    version: 1.11.0

  - name: nri-metadata-injection
    repository: file://../nri-metadata-injection
    condition: webhook.enabled
    version: 2.1.1

  - name: newrelic-k8s-metrics-adapter
    repository: file://../newrelic-k8s-metrics-adapter
    condition: metrics-adapter.enabled
    version: 0.1.1

  - name: kube-state-metrics
    repository: https://kubernetes.github.io/kube-state-metrics
    condition: ksm.enabled
    version: 2.13.2

  - name: nri-kube-events
    repository: file://../nri-kube-events
    condition: kubeEvents.enabled
    version: 1.11.0

  - name: newrelic-logging
    repository: file://../newrelic-logging
    condition: logging.enabled
    version: 1.10.6

  - name: newrelic-pixie
    repository: file://../newrelic-pixie
    condition: newrelic-pixie.enabled
    version: 1.4.2

  - name: pixie-operator-helm2-chart
    alias: pixie-chart
    repository: https://pixie-operator-charts.storage.googleapis.com
    condition: pixie-chart.enabled
    version: 0.0.15

  - name: newrelic-infra-operator
    repository: file://../newrelic-infra-operator
    condition: newrelic-infra-operator.enabled
    version: 0.4.0
