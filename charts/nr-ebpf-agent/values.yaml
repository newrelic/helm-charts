---
# -- Name of the Kubernetes cluster to be monitored. Mandatory. Can be configured with `global.cluster`
cluster: ""
# -- The license key to use. Can be configured with `global.licenseKey`
licenseKey: ""
# -- In case you don't want to have the license key in your values, this allows you to point to a user created secret to get the key from there. Can be configured also with `global.customSecretName`
customSecretName: ""
# -- In case you don't want to have the license key in your values, this allows you to point to which secret key is the license key located. Can be configured also with `global.customSecretLicenseKey`
customSecretLicenseKey: ""
# -- If using a customSecretLicenseKey, you must supply your region "US"/"EU". Otherwise, leave this value as an empty string.
region: ""
# -- To configure the log level in increasing order of verboseness.
# -- OFF, FATAL, ERROR, WARNING, INFO, DEBUG
logLevel: "INFO"
# -- To configure log file path of eBPF Agent. If logging to this path fails, logs will be directed to stdout.
logFilePath: ""
# -- The primary lever to control RAM use of the eBPF agent. Specified in MiB.
tableStoreDataLimitMB: "250"
# -- Enable APM data reporting. When enabled, the agent collects and reports application performance monitoring data
apmDataReporting: true
# -- Enable network metrics reporting. When enabled, the agent collects and reports network metrics including TCP statistics
# RENAMED from 'tcpStatsReporting' for clarity. The old name is deprecated but still supported for backward compatibility.
networkMetricsReporting: true

# -- All data drop filters configuration
# Configure filters to drop all types of data (Network Metrics and APM data) based on config provided
allDataFilters:
  # -- Drop data from the newrelic namespace and newrelic-bundle services.
  # RENAMED from 'dropDataNewRelic' for clarity. The old name is deprecated but still supported for backward compatibility.
  dropNewRelicBundle: true
  # -- List of Kubernetes namespaces for which all data should be dropped by the agent.
  # RENAMED from 'dropDataForNamespaces' for clarity. The old name is deprecated but still supported for backward compatibility.
  dropNamespaces: ["kube-system"]
  # -- Define a regex to match k8s service names to drop. Example "kube-dns|otel-collector|\\bblah\\b"
  # RENAMED from 'dropServiceNameRegex' for clarity. The old name is deprecated but still supported for backward compatibility.
  dropServiceNameRegex: ""
  # -- This config acts as a bypass for the dropServiceNameRegex config.
  # Service names that match this regex will not have their data dropped by the dropServiceNameRegex.
  # RENAMED from 'allowServiceNameRegex' for clarity. The old name is deprecated but still supported for backward compatibility.
  keepServiceNameRegex: ""
  # -- Drop all data for applications/entities that have NewRelic/OTEL APM agents running
  dropApmAgentEnabledEntity: false

# -- APM data filters configuration
# Configure filters to drop ebpf APM data based on config provided
apmDataFilters:
  # -- Drop eBPF APM data for applications/entities that have NewRelic APM/OTel agents running
  dropEapmForApmEnabledEntity: true
  # -- Pod labels to match for filtering APM data. Empty map means no label-based filtering
  # Example: dropPodLabels: { "app": "frontend", "env": "production" }
  dropPodLabels: {}
  # -- List of entity names to drop ebpf APM data for
  dropEntityName: []
  # -- List of entity names to always keep APM data. By default all entities are kept/enabled
  # -- This config bypasses dropEntityName filter.
  keepEntityName: []

# -- Network metrics Data filter / TCP stats filters
# Configure filters to drop/keep Network metrics data based on config provided
networkMetricsDataFilter:
  # -- Pod labels to match for filtering Network metrics data. Empty map means no label-based filtering
  # Example: dropPodLabels: { "app": "frontend", "env": "production" }
  dropPodLabels: {}
  # -- List of entity names to drop Network metrics data for
  dropEntityName: []
  # -- List of entity names to always keep Network metrics data. By default all entities are kept/enabled
  # -- This config bypasses dropEntityName filter.
  keepEntityName: []


# The protocols to enable for tracing in the socket_tracer. There is an ability to configure span export if it is enabled.
# Each protocol has the flexibility to selectively enable the type of OTLP data to export.
# Metrics are sent by default when a protocol is enabled and it supports metrics. Note: AMQP, Kafka, DNS do not report metrics.
# samplingLatency represents the sampling latency threshold for the spans to export.
# Options: p1, p10, p50, p90, p99.
protocols:
  global:
    # Controls maximum unlinked spans reported per protocol. Set to 0 to disable limit
    max_unlinked_spans: "100"
  http:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
      # -- samplingErrorRate represents the error rate threshold for an HTTP route where surpassing it would mean the corresponds spans of the route are exported.
      # Options: 1-100
      samplingErrorRate: ""
  mysql:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  pgsql:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  cass:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  redis:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  mongodb:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  kafka:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  amqp:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  dns:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  dynamodb:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"
  mssql:
    enabled: true
    spans:
      enabled: true
      samplingLatency: "p50"

# Configuration to apply on the eBPF agent daemonset.
ebpfAgent:
  image:
    # -- eBPF agent image to be deployed.
    repository: docker.io/newrelic/newrelic-ebpf-agent
    # -- The pull policy is defaulted to IfNotPresent, which skips pulling an image if it already exists. If pullPolicy is defined without a specific value, it is also set to Always.
    pullPolicy: IfNotPresent
    # -- The tag of the eBPF agent image to be deployed. If empty, uses Chart.AppVersion.
    tag: ""
  resources:
    limits:
      # -- Max memory allocated to the container.
      memory: 2Gi
    requests:
      # -- Min CPU allocated to the container.
      cpu: 100m
      # -- Min memory allocated to the container.
      memory: 250Mi
  serviceAccount:
    annotations: {}
  # -- Sets ebpfAgent pod tolerations. Overrides `tolerations` and `global.tolerations`
  tolerations: []
  # -- Sets ebpfAgent pod affinities. Overrides `affinity` and `global.affinity`
  affinity: {}
  # -- Sets ebpfAgent pod Annotations. Overrides `podAnnotations` and `global.podAnnotations`
  podAnnotations: {}
  # -- Sets ebpfAgent pod podSecurityContext. Overrides `podSecurityContext` and `global.securityContext.pod`
  podSecurityContext: {}
  # -- Sets ebpfAgent pod containerSecurityContext. Overrides `containerSecurityContext` and `global.securityContext.container`
  containerSecurityContext: {}
  # Sets the absolute path of the complete directory where the required linux headers are manually downloaded and placed for the eBPF agent to use.
  # This is useful under restricted environments where agent is not able to download required linux headers. The required headers are identified by the agent based on the kernel version.
  # The absolute path in case of K8s should also be prepended with /host when necessary.
  # ---- USE ONLY AFTER NEW RELIC SUPPORT RECOMMENDATION. ----
  downloadedPackagedHeadersPath: ""
  # Sets the absolute path of the complete directory where the linux headers are present for the eBPF agent to use.
  # This is useful where required linux headers could not be installed or path could not be determined. The absolute path in case of K8s should also be prepended with /host when necessary.
  # ---- USE ONLY AFTER NEW RELIC SUPPORT RECOMMENDATION. ----
  distroKernelHeadersPath: ""

# -- The secrets that are needed to pull images from a custom registry.
pullSecrets: []
# -- Additional labels for chart pods.
podLabels: {}
# -- Additional labels for chart objects.
labels: {}
# -- Sets pod's priorityClassName. Can be configured also with `global.priorityClassName`
priorityClassName: ""
# -- Sets pod's dnsConfig. Can be configured also with `global.dnsConfig`
dnsConfig: {}
# -- Sets all pods' node selector. Can be configured also with `global.nodeSelector`
nodeSelector: {}
# -- Sets all pods' tolerations to node taints. Can be configured also with `global.tolerations`
tolerations: []
# -- Sets all pods' affinities. Can be configured also with `global.affinity`
affinity: {}
# -- Sets all pods' podSecurityContext. Can be configured also with `global.securityContext.pod`
podSecurityContext: {}
# -- Sets all pods' containerSecurityContext. Can be configured also with `global.securityContext.container`
containerSecurityContext: {}
# --  Kubernetes cluster domain.
kubernetesClusterDomain: cluster.local
