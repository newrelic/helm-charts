suite: helm repository secretRef
templates:
  - templates/helm-repository.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: by default has no secretRef
    asserts:
      - notExists:
          path: .spec.secretRef
  - it: secretRef can be set correctly
    set:
      helm:
        repository:
          secretRef:
            name: test
    asserts:
      - equal:
          path: .spec.secretRef
          value:
            name: test
