apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ .Release.Namespace }}
  labels: {{ include "newrelic-logging.labels" . | indent 4 }}
  name: {{ template "newrelic-logging.fluentBitConfig" . }}
data:
  {{- if (include "newrelic-logging.lowDataMode" .) }}
  {{ $lowDataDefault := .Files.Get "static/lowdatamodedefaults.yaml" }}
    {{- $lowDataDefault }}
  {{- else }}
  fluent-bit.conf: |
    {{ .Values.config.service }}
    {{ .Values.config.inputs }}
    {{ .Values.config.filters }}
    {{ .Values.config.outputs }}
  {{- end }}