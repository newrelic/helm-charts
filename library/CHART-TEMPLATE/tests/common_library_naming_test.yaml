suite: test naming helpers
templates:
  - templates/deployment.yaml
  - templates/service.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: default values has its name correctly defined
    set:
      cluster: test-cluster
    asserts:
      - equal:
          path: metadata.name
          value: nri-my-release-CHART-TEMPLATE

  - it: name of the release is not duplicated
    set:
      cluster: test-cluster
    release:
      name: chart-template  # Must be lowercase
    asserts:
      - equal:
          path: metadata.name
          value: nri-CHART-TEMPLATE

  - it: name of the release is overridable
    set:
      cluster: test-cluster
      nameOverride: test
    asserts:
      - equal:
          path: metadata.name
          value: nri-my-release-test

  - it: name of the release is overridable with the release name
    set:
      cluster: test-cluster
      nameOverride: my-release
    asserts:
      - equal:
          path: metadata.name
          value: nri-my-release

  - it: nri- preffix does not duplicate
    set:
      cluster: test-cluster
    release:
      name: nri-bundle
    asserts:
      - equal:
          path: metadata.name
          value: nri-bundle-CHART-TEMPLATE

  - it: full name override
    set:
      cluster: test-cluster
      fullnameOverride: fno
    asserts:
      - equal:
          path: metadata.name
          value: fno
