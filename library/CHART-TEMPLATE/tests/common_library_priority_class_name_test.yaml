suite: test priorityClassName helpers
templates:
  - templates/deployment.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: does not set priorityClassName is not specified
    set:
      cluster: test-cluster
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: null
  - it: set priorityClassName if specified in values
    set:
      cluster: test-cluster
      priorityClassName: testPriority
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: testPriority
  - it: set priorityClassName if specified in globals
    set:
      cluster: test-cluster
      global:
        priorityClassName: testPriority
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: testPriority
  - it: set priorityClassName if specified giving priority to values
    set:
      cluster: test-cluster
      global:
        priorityClassName: different
      priorityClassName: testPriority
    asserts:
      - equal:
          path: spec.template.spec.priorityClassName
          value: testPriority

